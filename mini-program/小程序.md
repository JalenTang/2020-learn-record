# 小程序

## 剖析底层

微信小程序的架构设计

![小程序底层架构](../images/mini-program.png)

小程序框架包含两部分，**WebView**视图层**AppService**逻辑层，两者运行在不同的分离的线程中，试图层运行在渲染线程，逻辑层运行在 JS Core，

1. WebView 视图层

   - 小程序视图层由 WXML 和 WXSS 编写，
   - 不同环境的**渲染容器**不同，在 iOS 中是**WKWebView**，安卓中是**chromium定制内核**，开发工具中是**Chrome WebView**

2. AppService 逻辑层

   - 逻辑层单独运行在 JS 容器中，因此并没有一个完整的浏览器对象，不能像 H5 一样操作 BOM API 和 DOM API
   - 不同环境的**JS 容器**不同，在 iOS 中是**JS Core**，安卓中是**V8**，开发工具中是**NWJS**

3. 渲染层和逻辑层之间的通信

    -
